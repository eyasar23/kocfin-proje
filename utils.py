from deep_translator import GoogleTranslator
import streamlit as st

@st.cache_data
def metni_cevir(text, target_lang):
    if not text: return ""
    if target_lang == 'en': return text
    try:
        return GoogleTranslator(source='auto', target='tr').translate(text)
    except:
        return text


ASSETS_DB = {
    "ğŸ” Manuel GiriÅŸ Yap / DiÄŸer...": "MANUEL",
    "ğŸ‡¹ğŸ‡· THYAO - TÃ¼rk Hava YollarÄ±": "THYAO.IS",
    "ğŸ‡¹ğŸ‡· BJKAS - BeÅŸiktaÅŸ Futbol Yat.": "BJKAS.IS",
    "ğŸ‡¹ğŸ‡· GARAN - Garanti BankasÄ±": "GARAN.IS",
    "ğŸ‡¹ğŸ‡· ASELS - Aselsan": "ASELS.IS",
    "ğŸ‡¹ğŸ‡· SASA - Sasa Polyester": "SASA.IS",
    "ğŸ‡¹ğŸ‡· EREGL - EreÄŸli Demir Ã‡elik": "EREGL.IS",
    "ğŸ‡¹ğŸ‡· SISE - ÅiÅŸe Cam": "SISE.IS",
    "ğŸ‡¹ğŸ‡· KCHOL - KoÃ§ Holding": "KCHOL.IS",
    "ğŸ‡¹ğŸ‡· FROTO - Ford Otosan": "FROTO.IS",
    "ğŸ‡¹ğŸ‡· TUPRS - TÃ¼praÅŸ": "TUPRS.IS",
    "ğŸ‡¹ğŸ‡· AKBNK - Akbank": "AKBNK.IS",
    "ğŸ‡¹ğŸ‡· ISCTR - Ä°ÅŸ BankasÄ± (C)": "ISCTR.IS",
    "ğŸ‡¹ğŸ‡· YKBNK - YapÄ± Kredi": "YKBNK.IS",
    "ğŸ‡¹ğŸ‡· BIMAS - BÄ°M MaÄŸazalar": "BIMAS.IS",
    "ğŸ‡¹ğŸ‡· EKGYO - Emlak Konut": "EKGYO.IS",
    "ğŸ‡¹ğŸ‡· KOZAL - Koza AltÄ±n": "KOZAL.IS",
    "ğŸ‡¹ğŸ‡· PGSUS - Pegasus": "PGSUS.IS",
    "ğŸ‡¹ğŸ‡· SAHOL - SabancÄ± Holding": "SAHOL.IS",
    "ğŸ‡¹ğŸ‡· TCELL - Turkcell": "TCELL.IS",
    "ğŸ‡¹ğŸ‡· TTKOM - TÃ¼rk Telekom": "TTKOM.IS",
    "ğŸ‡¹ğŸ‡· VESTL - Vestel": "VESTL.IS",
    "ğŸ‡¹ğŸ‡· ARCLK - ArÃ§elik": "ARCLK.IS",
    "ğŸ‡¹ğŸ‡· PETKM - Petkim": "PETKM.IS",
    "ğŸ‡¹ğŸ‡· KONTR - Kontrolmatik": "KONTR.IS",
    "ğŸ‡¹ğŸ‡· HektaÅŸ - HEKTS": "HEKTS.IS",
    "ğŸ‡ºğŸ‡¸ AAPL - Apple Inc.": "AAPL",
    "ğŸ‡ºğŸ‡¸ TSLA - Tesla Inc.": "TSLA",
    "ğŸ‡ºğŸ‡¸ MSFT - Microsoft Corp.": "MSFT",
    "ğŸ‡ºğŸ‡¸ AMZN - Amazon.com": "AMZN",
    "ğŸ‡ºğŸ‡¸ GOOGL - Alphabet (Google)": "GOOGL",
    "ğŸ‡ºğŸ‡¸ NVDA - NVIDIA Corp.": "NVDA",
    "ğŸ‡ºğŸ‡¸ META - Meta Platforms (Facebook)": "META",
    "ğŸ‡ºğŸ‡¸ NFLX - Netflix": "NFLX",
    "ğŸ‡ºğŸ‡¸ AMD - Advanced Micro Devices": "AMD",
    "ğŸ‡ºğŸ‡¸ INTC - Intel Corp.": "INTC",
    "ğŸ‡ºğŸ‡¸ COIN - Coinbase Global": "COIN",
    "ğŸ‡ºğŸ‡¸ GME - GameStop": "GME",
    "â‚¿ BTC-USD - Bitcoin": "BTC-USD",
    "Î ETH-USD - Ethereum": "ETH-USD",
    "â— SOL-USD - Solana": "SOL-USD",
    "ğŸ¶ DOGE-USD - Dogecoin": "DOGE-USD",
    "âœ– XRP-USD - Ripple": "XRP-USD",
    "BNB-USD - Binance Coin": "BNB-USD",
    "AVAX-USD - Avalanche": "AVAX-USD",
    "ğŸŸ¡ XAU/USD - AltÄ±n (Ons)": "GC=F",
    "âšª XAG/USD - GÃ¼mÃ¼ÅŸ (Ons)": "SI=F",
    "ğŸ›¢ï¸ Brent Petrol": "BZ=F",
    "ğŸ’µ USD/TRY - Dolar/TL": "TRY=X",
    "ğŸ’¶ EUR/TRY - Euro/TL": "EURTRY=X"
}

TEXTS = {
    'tr': {
        'title': "KoÃ§Fin Pro",
        'sidebar_title': "KoÃ§Fin Terminal",
        'lang_select': "Dil / Language",
        'symbol_select': "VarlÄ±k Ara (Hisse, Kripto...)",
        'symbol_manual': "VarlÄ±k SembolÃ¼nÃ¼ YazÄ±n (Ã–rn: AAPL, THYAO.IS)",
        'period_input': "Zaman AralÄ±ÄŸÄ±",
        'layers': "ğŸ¨ Grafik KatmanlarÄ±",
        'layer_sma': "SMA (20/50 - KÄ±sa Vade)",
        'layer_ema': "EMA 100 (Trend KalkanÄ±) ğŸ›¡ï¸",
        'layer_bollinger': "Bollinger BantlarÄ±",
        'layer_signals': "AI Sinyalleri",
        'developer_title': "ğŸ’€ Kodun MimarÄ±: Emirhan",
        'developer_desc': "Sistemdeki aÃ§Ä±klarÄ± arÄ±yor. Finansal Matrix'in Ã¶tesini gÃ¶r.",
        'loading': "Piyasa Verileri Ä°ÅŸleniyor...",
        'error_data': "Veri bulunamadÄ± veya sembol hatalÄ±.",
        'error_sys': "Sistem HatasÄ±:",
        'tab_tech': "ğŸ“Š Teknik Analiz",
        'tab_fund': "ğŸ¢ Temel Veriler",
        'tab_news': "ğŸ“° Haberler",
        'rsi_label': "RSI GÃ¼cÃ¼",
        'rsi_overbought': "AÅŸÄ±rÄ± AlÄ±m",
        'rsi_oversold': "AÅŸÄ±rÄ± SatÄ±m",
        'rsi_neutral': "NÃ¶tr",
        'stoch_label': "Stokastik",
        'stoch_sell': "SatÄ±ÅŸ BÃ¶lgesi",
        'stoch_buy': "AlÄ±ÅŸ BÃ¶lgesi",
        'stoch_wait': "Bekle",
        'bb_label': "Bollinger",
        'bb_expensive': "PahalÄ±",
        'bb_cheap': "Ucuz",
        'bb_normal': "Normal",
        'trend_label': "Trend",
        'trend_up': "YÃ¼kseliÅŸ",
        'trend_down': "DÃ¼ÅŸÃ¼ÅŸ",
        'pe_ratio': "F/K OranÄ±",
        'market_cap': "Piyasa DeÄŸeri",
        'sector': "SektÃ¶r",
        'profile_title': "ğŸ¢ Åirket Profili",
        'no_data': "Veri Yok",
        'buy_signal': "AL",
        'sell_signal': "SAT",
        'dip_buy': "ğŸ’",
        'peak_sell': "â›”",
        'ai_score_title': "AI Teknik Skoru",
        'analysis_logic_title': "ğŸ§  Analiz MantÄ±ÄŸÄ±",
        'score_msg_strong_buy': "GÃœÃ‡LÃœ AL ğŸš€",
        'score_msg_buy': "AL ğŸŒ±",
        'score_msg_neutral': "NÃ–TR âš–ï¸",
        'score_msg_sell': "SAT ğŸ”»",
        'score_msg_strong_sell': "GÃœÃ‡LÃœ SAT ğŸ†˜",
        'rpt_rsi_low': "RSI Dipte ({:.0f}) - Tepki AlÄ±mÄ± Bekleniyor ğŸ’",
        'rpt_rsi_high': "RSI Zirvede ({:.0f}) - DÃ¼zeltme Gelebilir âš ï¸",
        'rpt_rsi_pos': "RSI Pozitif BÃ¶lgede (GÃ¼Ã§lÃ¼)",
        'rpt_rsi_neg': "RSI Negatif BÃ¶lgede (ZayÄ±f)",
        'rpt_bb_low': "Fiyat Bollinger AltÄ±nda - UCUZLUK FIRSATI ğŸ›’",
        'rpt_bb_high': "Fiyat Bollinger ÃœstÃ¼nde - AÅIRI PAHALI ğŸ’¸",
        'rpt_golden_cross': "Golden Cross (YÃ¼kseliÅŸ Trendi) Aktif",
        'rpt_sma_pos': "Fiyat OrtalamalarÄ±n %{:.1f} Ãœzerinde (Trend Pozitif)",
        'rpt_sma_neg': "Fiyat OrtalamalarÄ±n %{:.1f} AltÄ±nda (Trend Negatif)",
        'rpt_macd_buy': "MACD Al Sinyali Ãœretti",
        'rpt_macd_sell': "MACD Sat Sinyali Ãœretti",
        'rpt_ema_pos': "Fiyat EMA 100 Ãœzerinde (Trend BoÄŸa) ğŸ‚",
        'rpt_ema_neg': "Fiyat EMA 100 AltÄ±nda (Trend AyÄ±) ğŸ»"
    },
    'en': {
        'title': "KocFin Pro",
        'sidebar_title': "KocFin Terminal",
        'lang_select': "Language / Dil",
        'symbol_select': "Search Asset (Stock, Crypto...)",
        'symbol_manual': "Enter Ticker Symbol (e.g., AAPL, THYAO.IS)",
        'period_input': "Time Period",
        'layers': "ğŸ¨ Chart Layers",
        'layer_sma': "SMA (20/50 - Short Term)",
        'layer_ema': "EMA 100 (Trend Shield) ğŸ›¡ï¸",
        'layer_bollinger': "Bollinger Bands",
        'layer_signals': "AI Signals",
        'developer_title': "ğŸ’€ Architect: Emirhan",
        'developer_desc': "Hunting glitches in the system. See beyond the Financial Matrix.",
        'loading': "Processing Market Data...",
        'error_data': "Data not found or invalid symbol.",
        'error_sys': "System Error:",
        'tab_tech': "ğŸ“Š Technical Analysis",
        'tab_fund': "ğŸ¢ Fundamentals",
        'tab_news': "ğŸ“° News",
        'rsi_label': "RSI Power",
        'rsi_overbought': "Overbought",
        'rsi_oversold': "Oversold",
        'rsi_neutral': "Neutral",
        'stoch_label': "Stochastic",
        'stoch_sell': "Sell Zone",
        'stoch_buy': "Buy Zone",
        'stoch_wait': "Wait",
        'bb_label': "Bollinger",
        'bb_expensive': "Expensive",
        'bb_cheap': "Cheap",
        'bb_normal': "Normal",
        'trend_label': "Trend",
        'trend_up': "Bullish",
        'trend_down': "Bearish",
        'pe_ratio': "P/E Ratio",
        'market_cap': "Market Cap",
        'sector': "Sector",
        'profile_title': "ğŸ¢ Company Profile",
        'no_data': "No Data",
        'buy_signal': "BUY",
        'sell_signal': "SELL",
        'dip_buy': "ğŸ’",
        'peak_sell': "â›”",
        'ai_score_title': "AI Technical Score",
        'analysis_logic_title': "ğŸ§  Analysis Logic",
        'score_msg_strong_buy': "STRONG BUY ğŸš€",
        'score_msg_buy': "BUY ğŸŒ±",
        'score_msg_neutral': "NEUTRAL âš–ï¸",
        'score_msg_sell': "SELL ğŸ”»",
        'score_msg_strong_sell': "STRONG SELL ğŸ†˜",
        'rpt_rsi_low': "RSI Bottomed ({:.0f}) - Bounce Expected ğŸ’",
        'rpt_rsi_high': "RSI Peaked ({:.0f}) - Correction Likely âš ï¸",
        'rpt_rsi_pos': "RSI in Positive Zone (Strong)",
        'rpt_rsi_neg': "RSI in Negative Zone (Weak)",
        'rpt_bb_low': "Price Below Bollinger - BARGAIN OPPORTUNITY ğŸ›’",
        'rpt_bb_high': "Price Above Bollinger - OVERPRICED ğŸ’¸",
        'rpt_golden_cross': "Golden Cross (Uptrend) Active",
        'rpt_sma_pos': "Price is {:.1f}% Above Averages (Positive Trend)",
        'rpt_sma_neg': "Price is {:.1f}% Below Averages (Negative Trend)",
        'rpt_macd_buy': "MACD Buy Signal",
        'rpt_macd_sell': "MACD Sell Signal",
        'rpt_ema_pos': "Price Above EMA 100 (Bull Trend) ğŸ‚",
        'rpt_ema_neg': "Price Below EMA 100 (Bear Trend) ğŸ»"
    
    }
}