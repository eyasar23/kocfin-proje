from deep_translator import GoogleTranslator
import streamlit as st

@st.cache_data
def metni_cevir(text, target_lang):
    if not text: return ""
    if target_lang == 'en': return text
    try:
        return GoogleTranslator(source='auto', target='tr').translate(text)
    except:
        return text

TEXTS = {
    'tr': {
        'title': "KoÃ§Fin Pro",
        'sidebar_title': "KoÃ§Fin Terminal",
        'lang_select': "Dil / Language",
        'symbol_input': "VarlÄ±k SembolÃ¼",
        'period_input': "Zaman AralÄ±ÄŸÄ±",
        'layers': "ğŸ¨ Grafik KatmanlarÄ±",
        'layer_sma': "SMA (Ortalamalar)",
        'layer_bollinger': "Bollinger BantlarÄ±",
        'layer_signals': "AI Sinyalleri",
        'developer_title': "ğŸ’€ Kodun MimarÄ±: Emirhan",
        'developer_desc': "Sistemdeki aÃ§Ä±klarÄ± arÄ±yor. Finansal Matrix'in Ã¶tesini gÃ¶r.",
        'loading': "Piyasa Verileri Ä°ÅŸleniyor...",
        'error_data': "Veri bulunamadÄ± veya sembol hatalÄ±.",
        'error_sys': "Sistem HatasÄ±:",
        'tab_tech': "ğŸ“Š Teknik Analiz",
        'tab_fund': "ğŸ¢ Temel Veriler",
        'tab_news': "ğŸ“° Haberler",
        'rsi_label': "RSI GÃ¼cÃ¼",
        'rsi_overbought': "AÅŸÄ±rÄ± AlÄ±m",
        'rsi_oversold': "AÅŸÄ±rÄ± SatÄ±m",
        'rsi_neutral': "NÃ¶tr",
        'stoch_label': "Stokastik",
        'stoch_sell': "SatÄ±ÅŸ BÃ¶lgesi",
        'stoch_buy': "AlÄ±ÅŸ BÃ¶lgesi",
        'stoch_wait': "Bekle",
        'bb_label': "Bollinger",
        'bb_expensive': "PahalÄ±",
        'bb_cheap': "Ucuz",
        'bb_normal': "Normal",
        'trend_label': "Trend",
        'trend_up': "YÃ¼kseliÅŸ",
        'trend_down': "DÃ¼ÅŸÃ¼ÅŸ",
        'pe_ratio': "F/K OranÄ±",
        'market_cap': "Piyasa DeÄŸeri",
        'sector': "SektÃ¶r",
        'profile_title': "ğŸ¢ Åirket Profili",
        'no_data': "Veri Yok",
        'buy_signal': "AL",
        'sell_signal': "SAT",
        'ai_score_title': "AI Teknik Skoru",
        'analysis_logic_title': "ğŸ§  Analiz MantÄ±ÄŸÄ±",
        'score_msg_strong_buy': "GÃœÃ‡LÃœ AL ğŸš€",
        'score_msg_buy': "AL ğŸŒ±",
        'score_msg_neutral': "NÃ–TR âš–ï¸",
        'score_msg_sell': "SAT ğŸ”»",
        'score_msg_strong_sell': "GÃœÃ‡LÃœ SAT ğŸ†˜",
        
        # --- RAPOR CÃœMLELERÄ° (YENÄ°) ---
        'rpt_rsi_low': "RSI AÅŸÄ±rÄ± SatÄ±mda ({:.0f}) - GÃ¼Ã§lÃ¼ Al Sinyali",
        'rpt_rsi_high': "RSI AÅŸÄ±rÄ± AlÄ±mda ({:.0f}) - Kar SatÄ±ÅŸÄ± Riski",
        'rpt_rsi_pos': "RSI Pozitif BÃ¶lgede (Toparlanma)",
        'rpt_rsi_neg': "RSI Negatif BÃ¶lgede (BaskÄ± Var)",
        'rpt_bb_low': "Fiyat Bollinger Alt BandÄ±nÄ± Deldi (Tepki Gelebilir)",
        'rpt_bb_high': "Fiyat Bollinger Ãœst BandÄ±nda (Doygunluk)",
        'rpt_golden_cross': "Golden Cross (YÃ¼kseliÅŸ Trendi) Aktif",
        'rpt_sma_pos': "Fiyat OrtalamalarÄ±n %{:.1f} Ãœzerinde (Trend Pozitif)",
        'rpt_sma_neg': "Fiyat OrtalamalarÄ±n %{:.1f} AltÄ±nda (Trend Negatif)",
        'rpt_macd_buy': "MACD AlÄ±cÄ±lÄ± Seyrediyor",
        'rpt_macd_sell': "MACD SatÄ±cÄ±lÄ± Seyrediyor"
    },
    'en': {
        'title': "KocFin Pro",
        'sidebar_title': "KocFin Terminal",
        'lang_select': "Language / Dil",
        'symbol_input': "Asset Symbol",
        'period_input': "Time Period",
        'layers': "ğŸ¨ Chart Layers",
        'layer_sma': "SMA (Moving Averages)",
        'layer_bollinger': "Bollinger Bands",
        'layer_signals': "AI Signals",
        'developer_title': "ğŸ’€ Architect: Emirhan",
        'developer_desc': "Hunting glitches in the system. See beyond the Financial Matrix.",
        'loading': "Processing Market Data...",
        'error_data': "Data not found or invalid symbol.",
        'error_sys': "System Error:",
        'tab_tech': "ğŸ“Š Technical Analysis",
        'tab_fund': "ğŸ¢ Fundamentals",
        'tab_news': "ğŸ“° News",
        'rsi_label': "RSI Power",
        'rsi_overbought': "Overbought",
        'rsi_oversold': "Oversold",
        'rsi_neutral': "Neutral",
        'stoch_label': "Stochastic",
        'stoch_sell': "Sell Zone",
        'stoch_buy': "Buy Zone",
        'stoch_wait': "Wait",
        'bb_label': "Bollinger",
        'bb_expensive': "Expensive",
        'bb_cheap': "Cheap",
        'bb_normal': "Normal",
        'trend_label': "Trend",
        'trend_up': "Bullish",
        'trend_down': "Bearish",
        'pe_ratio': "P/E Ratio",
        'market_cap': "Market Cap",
        'sector': "Sector",
        'profile_title': "ğŸ¢ Company Profile",
        'no_data': "No Data",
        'buy_signal': "BUY",
        'sell_signal': "SELL",
        'ai_score_title': "AI Technical Score",
        'analysis_logic_title': "ğŸ§  Analysis Logic",
        'score_msg_strong_buy': "STRONG BUY ğŸš€",
        'score_msg_buy': "BUY ğŸŒ±",
        'score_msg_neutral': "NEUTRAL âš–ï¸",
        'score_msg_sell': "SELL ğŸ”»",
        'score_msg_strong_sell': "STRONG SELL ğŸ†˜",

        # --- RAPOR CÃœMLELERÄ° (ENGLISH) ---
        'rpt_rsi_low': "RSI Oversold ({:.0f}) - Strong Buy Signal",
        'rpt_rsi_high': "RSI Overbought ({:.0f}) - Profit Taking Risk",
        'rpt_rsi_pos': "RSI in Positive Zone (Recovery)",
        'rpt_rsi_neg': "RSI in Negative Zone (Pressure)",
        'rpt_bb_low': "Price Pierced Lower Bollinger Band (Reaction Likely)",
        'rpt_bb_high': "Price at Upper Bollinger Band (Saturation)",
        'rpt_golden_cross': "Golden Cross (Uptrend) Active",
        'rpt_sma_pos': "Price is {:.1f}% Above Averages (Positive Trend)",
        'rpt_sma_neg': "Price is {:.1f}% Below Averages (Negative Trend)",
        'rpt_macd_buy': "MACD Showing Buying Pressure",
        'rpt_macd_sell': "MACD Showing Selling Pressure"
    }
}